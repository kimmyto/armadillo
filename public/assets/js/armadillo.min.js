function detectDevice(){/Android|webOS|iPhone|iPod|BlackBerry|iPad/i.test(navigator.userAgent)?$("#player").show():$("#host").show()}window.onload=function(){detectDevice()};var App;jQuery(function(e){"use strict";var t={init:function(){t.socket=io.connect(),t.bindEvents()},bindEvents:function(){t.socket.on("connected",t.Connected),t.socket.on("gameCreated",t.gameCreated),t.socket.on("joined",t.joined),t.socket.on("clicked",t.clicked)},Connected:function(){App.mySocketId=t.socket.socket.sessionid},gameCreated:function(e){App.Host.startGame(e)},joined:function(e){App[App.myRole].changeLayout(e)},clicked:function(e){App.Host.clickButton(e)}};App={gameId:0,myRole:"",mySocketId:"",init:function(){App.bindEvents(),FastClick.attach(document.body)},endGame:function(t){e("#game").hide(),e("#getCode").hide(),e("#menu").hide(),e("#host").show(),e("#score").show(),e("#newScore").html(t+" Points")},restart:function(){restartGame(),e("#host").hide(),e("#game").show()},controller:function(e,t){App.$doc.on("touchstart",e,function(){App.Player.button(t)}),App.$doc.on("touchend",e,function(){App.Player.button(t)})},bindEvents:function(){App.$doc=e(document),App.$doc.on("click","#play",App.Host.createGame),App.$doc.on("click","#playAgain",App.restart),App.$doc.on("click","#join",App.Player.onJoin),App.controller("#button1",1),App.controller("#button2",2)},Host:{createGame:function(){t.socket.emit("createNewGame")},startGame:function(e){App.gameId=e.gameId,App.mySocketId=e.mySocketId,App.myRole="Host",App.Host.showCode()},showCode:function(){e("#menu").hide(),e("#getCode").show(),e("#code").html(App.gameId)},clickButton:function(e){switch(e.button){case 1:button1();break;case 2:button2();break;case 3:button3(e.angle)}},changeLayout:function(){e("#host").hide(),e("#game").show(),start()}},Player:{setNum:0,onJoin:function(){var o={gameId:e("#input").val()};t.socket.emit("JoinGame",o),App.myRole="Player"},changeLayout:function(o){t.socket.socket.sessionid===o.mySocketId&&(App.myRole="Player",App.gameId=o.gameId,e("#connect").hide(),e("#controller").show(),offset=e("#joystick").offset())},button:function(e,o){var n={gameId:App.gameId,button:e,angle:o};t.socket.emit("pressButton",n)}}},t.init(),App.init()}($));
